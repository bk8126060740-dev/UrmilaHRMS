<div class="borad-body">
    <div class="col-12">
        <div class="borad-header p-0 d-flex align-items-center justify-content-between me-4 mt-2">
            <h4 class="innerform-title mb-3 ms-4 mt-3">
                <p *ngIf="showTitle" class="fw-medium">Experience</p>
            </h4>
            <div class="header-buttons d-flex mt-2" (click)="addExperience()">
                <div class="add-newBtn cursor">
                    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
                        <path fill="none" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M5 12h14m-7 7V5" />
                    </svg>
                    Add New
                </div>
            </div>
        </div>
        <div class="wizard-table">
            <table class="w-100 position-relative table tr-table-hover table mt-3">
                <tr class="border-bottom position-sticky top-0">
                    <th class="ps-4 cursor fw-medium">Company Name</th>
                    <th class="text-start cursor fw-medium">Designation / Role</th>
                    <th class="text-start cursor fw-medium">Location</th>
                    <th class="text-start cursor fw-medium">Start Date</th>
                    <th class="text-start cursor fw-medium">End Date</th>
                    <th class="text-center fw-medium">View</th>
                    <th class="text-end pe-5 fw-medium">Action</th>
                </tr>
                <tr class="text-center" *ngIf="experienceData.length === 0">
                    <td colspan="100%" class="text-center"
                        style="padding-top:12px !important; padding-bottom:12px !important;">No data found</td>
                    <!-- <td class="text-start py-2 ps-4">Teamopine</td>
                <td class="text-start py-2">Manager</td>
                <td class="text-start py-2">Surat</td>
                <td class="text-start py-2">02-05-24</td>
                <td class="text-start py-2">02-09-24</td>
                <td class="text-start py-2">abc</td>
                <td class="text-start py-2">
                    <div class="attributes-icon d-flex justify-content-center align-items-center cursor">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512">
                            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="32"
                                d="M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112" />
                            <circle cx="256" cy="256" r="80" fill="none" stroke="currentColor" stroke-miterlimit="10"
                                stroke-width="32" />
                        </svg>
                    </div>
                </td>
                <td class="d-flex align-items-center justify-content-end pe-4 edit-icns py-2">
                    <div class="edit-icon d-flex justify-content-center align-items-center action-icn me-2 cursor">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16px" height="30px" viewBox="0 0 36 36">
                            <path fill="currentColor"
                                d="m4.22 23.2l-1.9 8.2a2.06 2.06 0 0 0 2 2.5a2 2 0 0 0 .43 0L13 32l15.84-15.78L20 7.4Z"
                                class="clr-i-solid clr-i-solid-path-1" />
                            <path fill="currentColor"
                                d="m33.82 8.32l-5.9-5.9a2.07 2.07 0 0 0-2.92 0L21.72 5.7l8.83 8.83l3.28-3.28a2.07 2.07 0 0 0-.01-2.93"
                                class="clr-i-solid clr-i-solid-path-2" />
                            <path fill="none" d="M0 0h36v36H0z" />
                        </svg>
                    </div>

                    <div class="delete-icon d-flex justify-content-center align-items-center action-icn cursor">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30px" height="18px" viewBox="0 0 24 24">
                            <path fill="currentColor"
                                d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z" />
                        </svg>
                    </div>
                </td> -->
                </tr>
                <tr class="text-center" *ngFor="let item of experienceData">
                    <td class="text-start ps-4" *ngIf="isEmployed">{{item.companyName}}</td>
                    <td class="text-start ps-4" *ngIf="!isEmployed">{{item.company}}</td>
                    <td class="text-start">{{item.designationRole}}</td>
                    <td class="text-start">{{item.location}}</td>
                    <td class="text-start">{{item.formattedStartDate}}</td>
                    <td class="text-start">{{item.formattedEndDate}}</td>
                    <td class="text-start">
                        <div class="attributes-icon d-flex justify-content-center align-items-center cursor"
                            (click)="viewDocument(item)"
                            *ngIf="item.experienceCertificateDoc.trim() != '' && item.experienceCertificateDoc != null && item.experienceCertificateDoc != undefined">
                            <span class="icn-bg bg-skyblue">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 32 32">
                                    <circle cx="16" cy="16" r="4" fill="currentColor"></circle>
                                    <path fill="currentColor"
                                        d="M30.94 15.66A16.69 16.69 0 0 0 16 5A16.69 16.69 0 0 0 1.06 15.66a1 1 0 0 0 0 .68A16.69 16.69 0 0 0 16 27a16.69 16.69 0 0 0 14.94-10.66a1 1 0 0 0 0-.68M16 22.5a6.5 6.5 0 1 1 6.5-6.5a6.51 6.51 0 0 1-6.5 6.5">
                                    </path>
                                </svg>
                            </span>
                        </div>
                    </td>
                    <td class="d-flex align-items-center justify-content-end pe-4 edit-icns">
                        <div class="d-flex justify-content-center gap-2 py-0" style="width: 72px;">
                            <div class="edit-icon d-flex justify-content-center align-items-center action-icn cursor"
                                (click)="editExp(item)"
                                style="padding-top: 0px !important; padding-bottom: 0px !important;">
                                <span class="icn-bg bg-skyblue" mat-raised-button matTooltip="Edit"
                                    [matTooltipPosition]="'left'" [matTooltipShowDelay]="showDelay.value"
                                    [matTooltipHideDelay]="hideDelay.value" aria-label="Edit">
                                    <icon-edit></icon-edit>
                                </span>
                            </div>

                            <div class="delete-icon d-flex justify-content-center align-items-center action-icn cursor"
                                (click)="deleteExp(item);">
                                <span class="icn-bg bg-red" mat-raised-button matTooltip="Delete"
                                    [matTooltipPosition]="'right'" [matTooltipShowDelay]="showDelay.value"
                                    [matTooltipHideDelay]="hideDelay.value" aria-label="Delete">
                                    <icon-delete></icon-delete>
                                </span>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </div>

    </div>
</div>


<!-- Experience popup modal  -->
<div bsModal #AddExperienceModel="bs-modal" class="modal fade " tabindex="-1" aria-labelledby="exampleModalLabel"
    [config]="{backdrop: 'static'}" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog popup-design right-sidebar-panel">
        <div class="modal-content px-2">
            <div class="modal-header popup-header justify-content-between d-flex">
                <h5 class="modal-title" id="exampleModalLabel">Add Experience</h5>
                <span class="d-block" (click)="closeExperience()">
                    <icon-ModalClose></icon-ModalClose>
                </span>
            </div>
            <div class="modal-body bg-white py-4">
                <form [formGroup]="experience" #formDirective="ngForm">
                    <div class="row gy-2">
                        <div class="col-12">
                            <div class="w-100">
                                <mat-form-field appearance="outline" class="w-100 custom-mat-form-field">
                                    <mat-label>Company Name</mat-label>
                                    <input matInput formControlName="companyName" required>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100 custom-mat-form-field">
                                <mat-label>Designation / Role</mat-label>
                                <input matInput formControlName="designation" required>
                            </mat-form-field>
                        </div>
                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100 custom-mat-form-field">
                                <mat-label>Location</mat-label>
                                <input matInput formControlName="location" required>

                            </mat-form-field>
                        </div>
                        <section class="example-section">
                            <mat-checkbox class="example-margin" formControlName="currentJob">Current Job</mat-checkbox>
                        </section>
                        <div class="col-12">
                            <div class="row">
                                <div class="col-12 col-md-6"
                                    [ngClass]="{'col-md-6 ':!experience.get('currentJob')?.value ,'col-md-12':experience.get('currentJob')?.value}">
                                    <mat-form-field appearance="outline" class="w-100 custom-mat-form-field">
                                        <mat-label>Start Date</mat-label>
                                        <input matInput [matDatepicker]="startdate" formControlName="startDate" required
                                            (dateChange)="onStartDateChange($event)" [max]="todayDate" />
                                        <mat-datepicker-toggle matIconSuffix [for]="startdate"></mat-datepicker-toggle>
                                        <mat-datepicker #startdate></mat-datepicker>
                                    </mat-form-field>
                                </div>
                                <div class="col-12 col-md-6 mt-md-0 mt-2">
                                    <mat-form-field appearance="outline" class="w-100 custom-mat-form-field"
                                        *ngIf="!experience.get('currentJob')?.value">
                                        <mat-label>End Date</mat-label>
                                        <input matInput [matDatepicker]="enddate" formControlName="endDate" required
                                            [min]="minEndDate" [max]="todayDate" />
                                        <mat-datepicker-toggle matIconSuffix [for]="enddate"></mat-datepicker-toggle>
                                        <mat-datepicker #enddate></mat-datepicker>


                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                        <!-- <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Description</mat-label>
                                <textarea matInput formControlName="description" required rows="3"></textarea>
                            </mat-form-field>
                        </div> -->
                        <div class="col-12 pt-2">
                            <div class="cursor" *ngIf="!files.length" appDrag (files)="filesDropped($event)"
                                (click)="triggerProfileFileInput(fileInput)"
                                (fileSizeError)="handleFileSizeErrors($event)">
                                <div
                                    class="input-group choose-file dragdrop-file d-flex flex-wrap w-100 flex-wrap justify-content-center">
                                    <div class="browse-icn w-100 text-center mb-2">
                                        <icon-BrowsFile></icon-BrowsFile>
                                    </div>

                                    <p class="w-100 text-center mb-1">Drag & Drop Upload File</p>
                                    <span class="w-100 text-center mb-1">OR</span>
                                    <button class="browse-btn">Browse File</button>
                                    <input type="file" #fileInput style="display: none;" accept=".pdf,.docx"
                                        name="profilePicPath" (change)="onDocumentFileSelected($event)" />
                                </div>

                            </div>

                            <div class="file-info mt-2" *ngFor="let file of files">
                                <i *ngIf="file.name.includes('.') || file.name.endsWith('.pdf')"
                                    class="fas fa-file-pdf me-2" style="color: #FA6060;"></i>
                                <!-- <span class="file-name">{{ file.name }}</span> -->
                                <span class="file-name">Experience Document</span>
                                <button type="button" class="btn btn-close" (click)="removeFile()"></button>
                            </div>
                        </div>
                        <div class="modal-footer popup-footer px-0 d-flex mt-3">
                            <button type="submit" class="btn btn-save mx-0 p-footerbtns w-100"
                                (click)="onSubmit()">Save</button>
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>