<div class="borad-body">
    <div class="col-12">
        <div class="borad-header p-0 d-flex align-items-center justify-content-between me-4 mt-3">
            <h4 class="innerform-title mb-3 ms-4 ">
                <p *ngIf="showTitle" class="fw-medium">Qualifications</p>
            </h4>
            <div class="header-buttons d-flex mt-2" (click)="addQualifications()">
                <div class="add-newBtn cursor d-flex justify-content-center align-items-center gap-1">
                    <icon-Add></icon-Add>
                    Add New
                </div>
            </div>
        </div>
        <div class="wizard-table">
            <table class="mt-3 w-100 position-relative table tr-table-hover table">
                <tr class="border-bottom">
                    <th class="ps-4 cursor fw-medium">Qualification Type</th>
                    <th class="text-start cursor fw-medium">Institution</th>
                    <th class="text-start cursor fw-medium">Grade</th>
                    <th class="text-start cursor fw-medium">Field Of Study</th>
                    <th class="text-start cursor fw-medium">Start Date</th>
                    <th class="text-start cursor fw-medium">End Date</th>
                    <th class="text-center fw-medium">View</th>
                    <th class="text-end pe-5 fw-medium">Action</th>
                </tr>
                <tr class="text-center" *ngIf="qualificationData.length <= 0">
                    <td colspan="100%" class="text-center py-3"
                        style="padding-top:12px !important; padding-bottom:12px !important;">No data found</td>
                </tr>
                <tr class="text-center" *ngFor="let item of qualificationData">
                    <td class="text-start ps-4">{{item.qualificationTypeName}}</td>
                    <td class="text-start ">{{item.institution}}</td>
                    <td class="text-start ">{{item.grade}}</td>
                    <td class="text-start ">{{item.fieldOfStudy}}</td>
                    <td class="text-start ">{{item.formattedStartDate}}</td>
                    <td class="text-start ">{{item.formattedEndDate}}</td>
                    <td class="text-start ">
                        <div class="attributes-icon d-flex justify-content-center align-items-center cursor"
                            (click)="viewDocument(item)"
                            *ngIf="item.document != null && item.document != '' && item.document != undefined">
                            <span class="icn-bg bg-skyblue">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 32 32">
                                    <circle cx="16" cy="16" r="4" fill="currentColor"></circle>
                                    <path fill="currentColor"
                                        d="M30.94 15.66A16.69 16.69 0 0 0 16 5A16.69 16.69 0 0 0 1.06 15.66a1 1 0 0 0 0 .68A16.69 16.69 0 0 0 16 27a16.69 16.69 0 0 0 14.94-10.66a1 1 0 0 0 0-.68M16 22.5a6.5 6.5 0 1 1 6.5-6.5a6.51 6.51 0 0 1-6.5 6.5">
                                    </path>
                                </svg>
                            </span>
                        </div>
                    </td>
                    <td class="d-flex align-items-center justify-content-end w-100 pe-4 edit-icns" style="float: left">
                        <div class="d-flex gap-2 justify-content-center p-0" style="width: 72px;">
                            <div class="edit-icon d-flex justify-content-center align-items-center action-icn cursor"
                                (click)="editQualification(item)">
                                <span class="icn-bg bg-skyblue" mat-raised-button matTooltip="Edit"
                                    [matTooltipPosition]="'left'" [matTooltipShowDelay]="showDelay.value"
                                    [matTooltipHideDelay]="hideDelay.value" aria-label="Edit">
                                    <icon-edit></icon-edit>
                                </span>
                            </div>

                            <div class="delete-icon d-flex justify-content-center align-items-center action-icn cursor"
                                (click)="deleteQualification(item);" mat-raised-button matTooltip="Delete"
                                [matTooltipPosition]="'right'" [matTooltipShowDelay]="showDelay.value"
                                [matTooltipHideDelay]="hideDelay.value" aria-label="Delete">
                                <span class="icn-bg bg-red">
                                    <icon-delete></icon-delete>
                                </span>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>

        </div>
    </div>
</div>


<!-- Qualifications popup modal -->
<div bsModal #AddQualificationModel="bs-modal" class="modal fade " tabindex="-1" aria-labelledby="exampleModalLabel"
    [config]="{backdrop: 'static'}" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog popup-design right-sidebar-panel">
        <div class="modal-content px-2">
            <div class="modal-header popup-header justify-content-between d-flex">
                <h5 class="modal-title" id="exampleModalLabel">Add Qualification</h5>
                <span class="d-block" (click)="closeQualifications()">
                    <icon-ModalClose></icon-ModalClose>
                </span>
            </div>
            <div class="modal-body bg-white py-4">
                <form [formGroup]="qualificationForm" #formDirective="ngForm">
                    <div class="row gy-2">
                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100 custom-mat-form-field">
                                <mat-label>Qualification Type</mat-label>
                                <mat-select name="qualificationTypeId" formControlName="qualificationTypeId" required>
                                    <mat-option [value]="1">Master</mat-option>
                                    <mat-option [value]="2">10th</mat-option>
                                    <mat-option [value]="3">12th</mat-option>
                                    <mat-option [value]="4">Bachelor</mat-option>
                                    <mat-option [value]="5">Diploma</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100 custom-mat-form-field">
                                <mat-label>Degree</mat-label>
                                <input matInput formControlName="degree" required />
                            </mat-form-field>
                        </div>

                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100 custom-mat-form-field">
                                <mat-label>Institution</mat-label>
                                <input matInput formControlName="institution" required />
                            </mat-form-field>
                        </div>

                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100 custom-mat-form-field">
                                <mat-label>Grade</mat-label>
                                <input matInput formControlName="grade" required />
                            </mat-form-field>
                        </div>

                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100 custom-mat-form-field">
                                <mat-label>Field Of Study</mat-label>
                                <input matInput formControlName="fieldOfStudy" required />
                            </mat-form-field>
                        </div>

                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100 custom-mat-form-field">
                                <mat-label>Start Date</mat-label>
                                <input matInput formControlName="startDate" [matDatepicker]="startdate" required
                                    (dateChange)="onStartDateChange($event)" [max]="todayDate" />
                                <mat-datepicker-toggle matSuffix [for]="startdate"></mat-datepicker-toggle>
                                <mat-datepicker #startdate></mat-datepicker>
                            </mat-form-field>
                        </div>

                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100 custom-mat-form-field">
                                <mat-label>End Date</mat-label>
                                <input matInput formControlName="endDate" [matDatepicker]="enddate" required
                                    [min]="minEndDate" [max]="todayDate" />
                                <mat-datepicker-toggle matSuffix [for]="enddate"></mat-datepicker-toggle>
                                <mat-datepicker #enddate></mat-datepicker>
                            </mat-form-field>
                        </div>

                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100 custom-mat-form-field">
                                <mat-label>Year Of Passing</mat-label>
                                <input matInput formControlName="yearOfPassing" maxlength="4" required type="number" />
                            </mat-form-field>
                        </div>

                        <div class="col-12 pt-0">
                            <div class="cursor" *ngIf="!files.length" appDrag (files)="filesDropped($event)"
                                (fileSizeError)="handleFileSizeErrors($event)"
                                (click)="triggerProfileFileInput(fileInput)">
                                <div
                                    class="input-group choose-file dragdrop-file d-flex flex-wrap w-100 flex-wrap justify-content-center">
                                    <div class="browse-icn w-100 text-center mb-2">
                                        <icon-BrowsFile></icon-BrowsFile>
                                    </div>

                                    <p class="w-100 text-center mb-1">Drag & Drop Upload File</p>
                                    <span class="w-100 text-center mb-1">OR</span>
                                    <button class="browse-btn">Browse File</button>
                                    <input type="file" #fileInput style="display: none;" accept=".pdf,.docx"
                                        name="profilePicPath" (change)="onDocumentFileSelected($event)" />
                                </div>

                            </div>

                            <div class="file-info m-0 " *ngFor="let file of files">
                                <i *ngIf="file.name.endsWith('.xls') || file.name.endsWith('.xlsx')"
                                    class="fas fa-file-excel me-2" style="color: red;"></i>
                                <span class="file-name">{{ file.name }}</span>
                                <button type="button" class="btn btn-close" (click)="removeFile()"></button>
                            </div>
                        </div>
                        <div class="modal-footer popup-footer px-0 d-flex mt-3">
                            <button type="submit" class="btn btn-save mx-0 p-footerbtns w-100" (click)="onSubmit()">
                                Save
                            </button>
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>