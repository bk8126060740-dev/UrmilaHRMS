<div class="container-fuild p-0 m-0">
  <div class="row m-0 p-0">
    <div class="col p-0 m-0">
      <div class="row p-0 m-0">
        <div class="col-auto code-type-section p-0">
          <!-- sub-menu start -->
          <div class="submenu-sidebar position-sticky">

            <ul class="submenu-sidebar-menus list-style-none mt-3">
              <div class="emp-name mb-3 px-4 mx-2">
                <p class="">{{employeeData.firstName}} {{employeeData.lastName}}</p>
              </div>
              <li class="border-bottom border-top" (click)="setComponent('basic')">
                <a [ngClass]="{'active':activeChildComponent === 'basic'}">Basic Details </a>
              </li>
              <li class="border-bottom" (click)="setComponent('address')">
                <a [ngClass]="{'active':activeChildComponent === 'address'}">Address</a>
              </li>
              <li class="border-bottom" (click)="setComponent('contactInfo')">
                <a [ngClass]="{'active':activeChildComponent === 'contactInfo'}">Emergency Contact Info </a>
              </li>
              <li class="border-bottom" (click)="setComponent('experience')">
                <a [ngClass]="{'active':activeChildComponent === 'experience'}">Experience </a>
              </li>
              <li class="border-bottom" (click)="setComponent('qualifications')">
                <a [ngClass]="{'active':activeChildComponent === 'qualifications'}">Qualifications </a>
              </li>
              <li class="border-bottom" (click)="setComponent('documents')">
                <a [ngClass]="{'active':activeChildComponent === 'documents'}">Asset Allocated</a>
              </li>
              <li class="border-bottom" (click)="setComponent('finacialDetails')">
                <a [ngClass]="{'active':activeChildComponent === 'finacialDetails'}">Financial Details </a>
              </li>
              <!-- <li class="border-bottom py-1" (click)="setComponent('salarySlip')">
                <a [ngClass]="{'active':activeChildComponent === 'salarySlip'}">Salary Slip </a>
              </li> -->
              <li class="border-bottom" (click)="setComponent('bgVerfications')">
                <a [ngClass]="{'active':activeChildComponent === 'bgVerfications'}">BG Verification</a>
              </li>
              <li class="border-bottom" (click)="setComponent('familyDetails')">
                <a [ngClass]="{'active':activeChildComponent === 'familyDetails'}">Family Details </a>
              </li>
              <li class="border-bottom" (click)="setComponent('pfAccountDetails')">
                <a [ngClass]="{'active':activeChildComponent === 'pfAccountDetails'}">PF Account Details </a>
              </li>
              <li class="border-bottom" (click)="setComponent('esicAccountDetails')">
                <a [ngClass]="{'active':activeChildComponent === 'esicAccountDetails'}">ESIC Account Details</a>
              </li>
              <li class="border-bottom" (click)="setComponent('payrollAttributes')">
                <a [ngClass]="{'active':activeChildComponent === 'payrollAttributes'}">Payroll Attributes </a>
              </li>
              <li class="border-bottom" (click)="setComponent('desinationHistory')">
                <a [ngClass]="{'active':activeChildComponent === 'desinationHistory'}">Designation History </a>
              </li>
              <li class="border-bottom" (click)="setComponent('projectHistory')">
                <a [ngClass]="{'active':activeChildComponent === 'projectHistory'}">Project History </a>
              </li>
            </ul>
          </div>
          <!-- sub-menu end -->
        </div>
        <div class="col p-0">
          <div class="m-3 mb-0 ps-3">
            <app-breadcrumb></app-breadcrumb>
          </div>
          <div class="dashborad-main p-0 employee-fixHeight mb-3">
            <div class=" borad-parent p-0 position-relative ">
              <div class="main-board form-borad ">
                <div
                  class="borad-header-parent pb-3 pt-3 border-bottom d-flex flex-wrap gy-md-0 gy-2 gap-2 align-items-center justify-content-center justify-content-sm-between bg-white">
                  <p class="board-title" *ngIf="activeChildComponent === 'basic'">Basic Details</p>
                  <p class="board-title" *ngIf="activeChildComponent === 'address'">Address Details</p>
                  <p class="board-title" *ngIf="activeChildComponent === 'contactInfo'">Emergency Contact Info</p>
                  <p class="board-title" *ngIf="activeChildComponent === 'experience'">Experience Details</p>
                  <p class="board-title" *ngIf="activeChildComponent === 'qualifications'">Qualifications Details</p>
                  <p class="board-title" *ngIf="activeChildComponent === 'documents'">Asset Allocated</p>
                  <p class="board-title" *ngIf="activeChildComponent === 'finacialDetails'">Financial Details</p>
                  <p class="board-title" *ngIf="activeChildComponent === 'salarySlip'">Salary Slip</p>
                  <p class="board-title" *ngIf="activeChildComponent === 'bgVerfications'">BG Verification</p>
                  <p class="board-title" *ngIf="activeChildComponent === 'familyDetails'">Family Details</p>
                  <p class="board-title" *ngIf="activeChildComponent === 'pfAccountDetails'">PF Account Details</p>
                  <p class="board-title" *ngIf="activeChildComponent === 'esicAccountDetails'">ESIC Account Details</p>
                  <p class="board-title" *ngIf="activeChildComponent === 'payrollAttributes'">Payroll Attributes</p>
                  <p class="board-title" *ngIf="activeChildComponent === 'desinationHistory'">Designation History</p>
                  <p class="board-title" *ngIf="activeChildComponent === 'projectHistory'">Project History</p>
                  <div class="header-buttons d-flex gap-2" *ngIf="activeChildComponent !== 'contactInfo' && activeChildComponent !== 'experience' && activeChildComponent !== 'qualifications'
                    && activeChildComponent !== 'finacialDetails' && activeChildComponent !== 'familyDetails' && activeChildComponent !== 'desinationHistory'
                    && activeChildComponent !== 'documents' && activeChildComponent !== 'projectHistory'">
                    <!-- <div class="add-newBtn cursor me-3">
                      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
                        <path fill="none" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M5 12h14m-7 7V5" />
                      </svg>
                      Add New
                    </div>
                    <button type="submit" class="header-btn btn-cancel me-3">
                      <p>Cancel</p><svg class="d-none" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em"
                        viewBox="0 0 24 24">
                        <path fill="currentColor"
                          d="M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4" />
                      </svg>
                    </button> -->

                    <ng-container *ngIf="activeChildComponent === 'basic'">
                      <div class="col" *ngIf="isEmployed && userTypeId != 4 && userTypeId != 1">
                        <button class="header-btn btn-save px-3 w-100 d-flex gap-2 align-items-center" (click)="
                          downloadOfferLatter()"
                          style="padding-top: 10px !important; padding-bottom: 10px !important;">
                          <icon-Download></icon-Download>
                          <p class="fs-14" style="white-space: nowrap;">Offer Latter</p>
                        </button>
                      </div>

                      <div class="col" *ngIf="isEmployed  && userTypeId != 4 && userTypeId != 1">
                        <button class="header-btn btn-save px-3 w-100 d-flex gap-2 align-items-center"
                          (click)="openSalarySheetModel()"
                          style="padding-top: 10px !important; padding-bottom: 10px !important;">
                          <icon-Download></icon-Download>
                          <p class="fs-14" style="white-space: nowrap;">Salary Slip</p>
                        </button>
                      </div>
                    </ng-container>

                    <button type="cancel" class="header-btn btn-cancel" (click)="cancel()">
                      <p>Cancel</p>
                      <icon-CancelHead></icon-CancelHead>
                    </button>

                    <button type="submit" class="header-btn btn-save" (click)="submit()">
                      <p>Save</p>
                      <icon-Save></icon-Save>
                    </button>

                  </div>
                </div>
                <div *ngIf="activeChildComponent === 'basic'" style="margin-top: 65px;">
                  <app-basic-details [employeeId]="employeeId" (formSubmit)="onFormSubmit($event,'Basic Detils')"
                    (isFormValid)="formvalidation($event,'Basic Detils')"></app-basic-details>
                </div>

                <div *ngIf="activeChildComponent === 'address'" style="margin-top: 65px;">
                  <app-address [employeeId]="employeeId" (formSubmit)="onFormSubmit($event,'Address Detils')"
                    (isFormValid)="formvalidation($event,'Address Detils')"></app-address>
                </div>
                <div *ngIf="activeChildComponent === 'contactInfo'" style="margin-top: 65px;">
                  <app-contact-info [employeeId]="employeeId"></app-contact-info>
                </div>
                <div *ngIf="activeChildComponent === 'experience'" style="margin-top: 75px;">
                  <app-experience [employeeId]="employeeId" [showTitle]="false"> </app-experience>
                </div>
                <div *ngIf="activeChildComponent === 'qualifications'" style="margin-top: 75px;">
                  <app-qualifications [showTitle]="false" [employeeId]="employeeId"></app-qualifications>
                </div>
                <div *ngIf="activeChildComponent === 'documents'" style="margin-top: 75px;">
                  <app-documents [employeeId]="employeeId" [showTitle]="false"></app-documents>

                </div>
                <div *ngIf="activeChildComponent === 'finacialDetails'" style="margin-top: 75px;">
                  <app-finacial-details [showTitle]="false" [employeeId]="employeeId"></app-finacial-details>
                </div>
                <div *ngIf="activeChildComponent === 'salarySlip'" style="margin-top: 65px;">
                  <app-salary-slip [employeeId]="employeeId" [showTitle]="false"></app-salary-slip>
                </div>
                <div *ngIf="activeChildComponent === 'bgVerfications'" style="margin-top: 65px;">
                  <app-bg-verfications [employeeId]="employeeId"
                    (bgVerificationData)="onFormSubmit($event,'bgVerification')"></app-bg-verfications>
                </div>
                <div *ngIf="activeChildComponent === 'familyDetails'" style="margin-top: 65px;">
                  <app-family-details [employeeId]="employeeId"></app-family-details>
                </div>
                <div *ngIf="activeChildComponent === 'pfAccountDetails'" style="margin-top: 65px;">
                  <app-pf-account-details [employeeId]="employeeId" (pfnumber)="onFormSubmit($event,'pfAccountDetails')"
                    (pfId)="onFormSubmit($event,'pfId')"></app-pf-account-details>
                </div>
                <div *ngIf="activeChildComponent === 'esicAccountDetails'" style="margin-top: 65px;">
                  <app-esic-account-details [employeeId]="employeeId" (esic)="onFormSubmit($event,'esicAccountDetails')"
                    (esicId)="onFormSubmit($event,'esicId')"></app-esic-account-details>
                </div>
                <div *ngIf="activeChildComponent === 'payrollAttributes'" style="margin-top: 65px;">
                  <app-payroll-attribute [employeeId]="employeeId"
                    (formSubmit)="onFormSubmit($event,'Payroll Attributes')"
                    (isFormValid)="formvalidation($event,'Payroll Attributes')"></app-payroll-attribute>
                </div>
                <div *ngIf="activeChildComponent === 'desinationHistory'" style="margin-top: 65px;">
                  <app-designation-history [employeeId]="employeeId"
                    (formSubmit)="onFormSubmit($event,'desinationHistory')"></app-designation-history>
                </div>
                <div *ngIf="activeChildComponent === 'projectHistory'" style="margin-top: 65px;">
                  <app-project-history [employeeId]="employeeId"></app-project-history>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div bsModal #salarySlipModal="bs-modal" class="modal fade" tabindex="-1" aria-labelledby="exampleModalLabel"
  aria-hidden="true" [config]="{backdrop:'static'}">
  <div class="modal-dialog popup-design">
    <div class="modal-content px-4">
      <div class="modal-header popup-header justify-content-between d-flex">
        <h5 class="modal-title pt-2" id="exampleModalLabel">Download Salary Slip</h5>
        <span class="d-block" (click)="salarySlipModal?.hide()">
          <icon-ModalClose></icon-ModalClose>
        </span>
      </div>
      <form [formGroup]="salarySlipForm" #formDirective="ngForm">
        <div class="row align-items-center justify-content-center g-4 p-0 m-0">
          <div class="col-12 p-0">
            <div class="w-100 mb-2">
              <mat-form-field appearance="outline" class="w-100 custom-mat-form-field">
                <mat-label>Month</mat-label>
                <mat-select formControlName="selectedMonth" name="month" required
                  (selectionChange)="onMonthYearChange($event)">
                  <mat-option *ngFor="let month of employeeBasicDetils.salarySlips; index as i" [value]="month.id">
                    {{ month.month }} - {{month.year}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <!-- <div class="w-100 mb-2">
                            <mat-form-field appearance="outline" class="w-100 custom-mat-form-field">
                                <mat-label>Year</mat-label>
                                <mat-select formControlName="year" name="year" required>
                                    <mat-option *ngFor="let year of employeeBasicDetils.salarySlips; index as i" [value]="year.year">
                                        {{ year.label }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div> -->
          </div>

          <div class="modal-footer popup-footer d-flex mt-2">
            <button class="btn btn-save p-footerbtns" style="width: fit-content;"
              (click)="onSalarySlipDownload()">Download</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>